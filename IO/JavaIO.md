# Java 的 IO 流分几种

## 按方向

- 输入流
- 输出流

## 按数据

- 字节流（Stream）：按字节读写，适合所有类型文件的数据传输。
- 字符流（Reader，Writer）：按字符读写，只能处理纯文本数据，方便对内容按行处理。字节流转字符流通过字符流的构造函数传入字节流对象实现。

## 按功能

- 节点流：读写数据的终端（FileReader）
- 处理流：对一个已经存在的流的封装（BufferedReader）

# Java IO 的设计模式（TODO）

## 适配器模式

```java
Reader reader = new InputStreamReader(inputStream);
```

## 装饰器模式

```java
BufferedReader reader = new BufferedInputStream(new FileInputStream(inputStream));
```

动态地向一个类中添加新的行为的设计模式。装饰器模式比生成子类更灵活。装饰者基类持有被装饰着的引用。

# 阻塞 IO 和非阻塞 IO

IO 操作包括对硬盘，网络 socket 和外设的读写。

阻塞 IO 在数据没有就绪的时候会一直阻塞等待数据就绪。对于非阻塞 IO，数据没有就绪就直接返回一个标志信息告知用户线程当前没有就绪。

完整的 IO 操作包括两个阶段：

1. 查看数据是否就绪（阻塞 IO 与非阻塞 IO 的区别在这里）
2. 数据拷贝（内核数据拷贝到用户线程）

# BIO，NIO，AIO

## BIO 同步阻塞

一个**连接**一个线程。适用于连接数目小且固定的架构。

## NIO 同步非阻塞

一个**请求**一个线程，客户端的连接请求会注册到多路复用器上，轮询到 IO 请求才会启动线程去处理。适用于连接数目多且比较短的架构。

## AIO 异步非阻塞

一个**有效请求**一个线程。客户端的 IO 请求通过操作系统先完成之后，再通知服务器启动线程去处理。适合连接数目多且长的架构。
